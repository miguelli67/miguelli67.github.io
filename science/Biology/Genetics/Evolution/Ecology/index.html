<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ecology</title>
<style>
  body{margin:0;font-family:'Segoe UI',system-ui,Arial,sans-serif;background:linear-gradient(135deg,#d7f9ff,#ffffff);color:#233;}
  .wrap{max-width:1100px;margin:0 auto;padding:40px 20px}
  h1,h2{color:#0f6b7a;text-align:center;margin:0 0 12px}
  p.lead{text-align:center;margin:8px auto 28px;max-width:800px}

  .btn{display:inline-block;background:#0f6b7a;color:#fff;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:700;border:none;cursor:pointer}
  .btn:hover{background:#0c505b}
  .pill{background:#e8fafc;color:#0f6b7a;padding:4px 10px;border-radius:999px;font-weight:600}

  /* Biome flip cards */
  .grid{display:grid;gap:14px}
  @media(min-width:800px){.grid{grid-template-columns:repeat(3,1fr)}}
  .card{perspective:1000px;height:180px}
  .face{position:relative;height:100%;transform-style:preserve-3d;transition:transform .6s}
  .card.flipped .face{transform:rotateY(180deg)}
  .front,.back{position:absolute;inset:0;border-radius:12px;padding:14px;box-shadow:0 6px 16px rgba(0,0,0,.08);backface-visibility:hidden}
  .front{background:#ffffff;border:1px solid #d7eef2;display:flex;align-items:center;justify-content:center;font-weight:700}
  .back{background:#f7feff;border:1px solid #cfe6ea;transform:rotateY(180deg);font-size:.98rem;line-height:1.45}

  /* Drag & drop roles */
  .roles{display:grid;gap:12px;margin-top:10px}
  @media(min-width:900px){.roles{grid-template-columns:260px 1fr}}
  .pool,.zones{background:#fff;border:1px solid #dfecec;border-radius:10px;padding:10px;box-shadow:0 4px 12px rgba(0,0,0,.05)}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{user-select:none;background:#eef9f1;border-left:6px solid #2a7f62;border:1px solid #d4eadb;border-radius:999px;padding:6px 10px;cursor:grab}
  .zonewrap{display:grid;gap:10px}
  @media(min-width:900px){.zonewrap{grid-template-columns:repeat(3,1fr)}}
  .zone{border:2px dashed #cfe6d9;border-radius:10px;padding:10px;min-height:110px}
  .zone h3{margin:0 0 4px;color:#145c4d;text-align:center}
  .zone.over{background:#f1fff7;box-shadow:inset 0 0 0 2px #8fe0c4}

  /* Food chain builder */
  .chain{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;align-items:center;margin:10px 0}
  .node{background:#fff;border:1px solid #dfecec;border-radius:10px;padding:8px 12px;box-shadow:0 4px 12px rgba(0,0,0,.05)}
  .arrow{font-size:20px;color:#999}

  /* Quiz */
  .quiz{background:#ffffff;border:1px solid #dfecec;border-radius:12px;padding:16px;box-shadow:0 6px 16px rgba(0,0,0,.06);max-width:800px;margin:0 auto}
  .q{margin-bottom:14px}
  .q p{margin:0 0 6px;font-weight:700}
  .submit{display:block;margin:12px auto 0}

  .center{text-align:center}
  .spacer{height:26px}
</style>
</head>
<body>
<div class="wrap">
  <h1>üåø Ecology</h1>
  <p class="lead">Ecology studies how organisms interact with each other and with their environment ‚Äî from <span class="pill">organism</span> to <span class="pill">population</span> to <span class="pill">community</span> to <span class="pill">ecosystem</span> to the <span class="pill">biosphere</span>.</p>

  <!-- Biome flip cards -->
  <h2>Biomes (Tap to Flip)</h2>
  <div class="grid" id="biomes">
    <div class="card"><div class="face">
      <div class="front">üåµ Desert</div>
      <div class="back">Hot days, cold nights, low rainfall. Plants with water storage (cacti) and animals active at night.</div>
    </div></div>
    <div class="card"><div class="face">
      <div class="front">üå≤ Taiga</div>
      <div class="back">Coniferous forests, long winters, short mild summers. Moose, lynx, evergreen trees.</div>
    </div></div>
    <div class="card"><div class="face">
      <div class="front">üå¥ Tropical Rainforest</div>
      <div class="back">Warm, wet, high biodiversity. Dense canopy, rapid nutrient cycling.</div>
    </div></div>
    <div class="card"><div class="face">
      <div class="front">üåæ Grassland</div>
      <div class="back">Seasonal rainfall, grasses dominate, grazing herbivores and predators.</div>
    </div></div>
    <div class="card"><div class="face">
      <div class="front">‚ùÑÔ∏è Tundra</div>
      <div class="back">Permafrost, very cold, low-growing plants, short growing season.</div>
    </div></div>
    <div class="card"><div class="face">
      <div class="front">üå≥ Temperate Forest</div>
      <div class="back">Four seasons, deciduous trees, rich soil and diverse fauna.</div>
    </div></div>
  </div>

  <div class="spacer"></div>

  <!-- Drag & drop roles -->
  <h2>Sort the Organisms: Producer / Consumer / Decomposer</h2>
  <div class="roles">
    <div class="pool">
      <strong>Organism Pool</strong>
      <div class="chips" id="pool">
        <div class="chip" draggable="true">Grass</div>
        <div class="chip" draggable="true">Algae</div>
        <div class="chip" draggable="true">Rabbit</div>
        <div class="chip" draggable="true">Wolf</div>
        <div class="chip" draggable="true">Mushroom</div>
        <div class="chip" draggable="true">Bacteria</div>
        <div class="chip" draggable="true">Hawk</div>
        <div class="chip" draggable="true">Oak Tree</div>
        <div class="chip" draggable="true">Frog</div>
        <div class="chip" draggable="true">Zooplankton</div>
      </div>
      <div class="center" style="margin-top:10px;">
        <button class="btn" id="checkRoles">Check Answers</button>
        <button class="btn" id="resetRoles" style="background:#ececec;color:#222">Reset</button>
      </div>
      <p class="center" id="roleScore"></p>
    </div>

    <div class="zones">
      <div class="zonewrap">
        <div class="zone" data-accept="Producer"><h3>Producer</h3><div class="chips"></div></div>
        <div class="zone" data-accept="Consumer"><h3>Consumer</h3><div class="chips"></div></div>
        <div class="zone" data-accept="Decomposer"><h3>Decomposer</h3><div class="chips"></div></div>
      </div>
      <p style="margin:10px 0 0"><strong>Hint:</strong> Producers make their own food (photosynthesis). Consumers eat other organisms. Decomposers break down dead matter, recycling nutrients.</p>
    </div>
  </div>

  <div class="spacer"></div>

  <!-- Food chain builder -->
  <h2>Build a Food Chain</h2>
  <div class="center" style="margin-bottom:10px">
    <label for="chainSel"><strong>Pick an ecosystem:</strong></label>
    <select id="chainSel">
      <option value="field">Field</option>
      <option value="pond">Pond</option>
      <option value="forest">Forest</option>
      <option value="ocean">Ocean</option>
    </select>
    <button class="btn" id="showChain">Show Chain</button>
  </div>
  <div class="chain" id="chainView"></div>
  <p class="center muted" style="max-width:760px;margin:10px auto">Energy flows **from the sun to producers**, then to consumers. Only ~10% of energy passes to the next trophic level (the rest is lost as heat and life processes).</p>

  <div class="spacer"></div>

  <!-- Mini quiz -->
  <h2>Ecology Quick Quiz</h2>
  <div class="quiz">
    <div class="q">
      <p>1) A decomposer‚Äôs main role is to‚Ä¶</p>
      <label><input type="radio" name="q1" value="A"> Produce glucose from sunlight</label><br>
      <label><input type="radio" name="q1" value="B"> Hunt prey</label><br>
      <label><input type="radio" name="q1" value="C"> Break down dead matter and recycle nutrients</label>
    </div>
    <div class="q">
      <p>2) In most ecosystems, the original source of energy is‚Ä¶</p>
      <label><input type="radio" name="q2" value="A"> The sun</label><br>
      <label><input type="radio" name="q2" value="B"> Decomposers</label><br>
      <label><input type="radio" name="q2" value="C"> Apex predators</label>
    </div>
    <div class="q">
      <p>3) Which sequence best shows energy flow?</p>
      <label><input type="radio" name="q3" value="A"> Consumer ‚Üí Producer ‚Üí Decomposer</label><br>
      <label><input type="radio" name="q3" value="B"> Producer ‚Üí Consumer ‚Üí Decomposer</label><br>
      <label><input type="radio" name="q3" value="C"> Decomposer ‚Üí Consumer ‚Üí Producer</label>
    </div>
    <button class="btn submit" id="quizBtn">Submit</button>
    <p class="center" id="quizScore"></p>
  </div>

  <div class="center" style="margin-top:24px">
    <a class="btn" href="../index.html">Back to Biology</a>
  </div>
</div>

<script>
  // --- Flip cards ---
  document.querySelectorAll('#biomes .card').forEach(c=>{
    c.addEventListener('click',()=>c.classList.toggle('flipped'));
  });

  // --- Drag & drop roles ---
  const correctRoles = {
    Producer:  ["Grass","Algae","Oak Tree"],
    Consumer:  ["Rabbit","Wolf","Hawk","Frog","Zooplankton"],
    Decomposer:["Mushroom","Bacteria"]
  };
  const pool = document.getElementById('pool');
  const zones = document.querySelectorAll('.zone');
  let dragEl = null;

  function enableDnD(el){
    el.addEventListener('dragstart',e=>{dragEl = el; e.dataTransfer.setData('text/plain',el.textContent);});
    el.addEventListener('dragend',()=>{dragEl=null;});
  }
  document.querySelectorAll('.chip').forEach(enableDnD);

  zones.forEach(z=>{
    const dropArea = z.querySelector('.chips');
    ['dragenter','dragover'].forEach(ev=>{
      dropArea.addEventListener(ev, e=>{e.preventDefault(); z.classList.add('over')});
    });
    ['dragleave','drop'].forEach(ev=>{
      dropArea.addEventListener(ev, e=>{z.classList.remove('over')});
    });
    dropArea.addEventListener('drop', e=>{
      e.preventDefault();
      if(dragEl){ dropArea.appendChild(dragEl); }
    });
  });

  document.getElementById('resetRoles').addEventListener('click', ()=>{
    document.querySelectorAll('.zone .chips .chip').forEach(ch=>pool.appendChild(ch));
    document.getElementById('roleScore').textContent = '';
  });

  document.getElementById('checkRoles').addEventListener('click', ()=>{
    let score = 0, total = document.querySelectorAll('.chip').length;
    zones.forEach(z=>{
      const expect = z.getAttribute('data-accept');
      const placed = Array.from(z.querySelectorAll('.chip')).map(n=>n.textContent);
      placed.forEach(name=>{
        if(correctRoles[expect].includes(name)) score++;
      });
    });
    document.getElementById('roleScore').textContent = `You placed ${score}/${total} correctly`;
  });

  // --- Food chain builder ---
  const CHAINS = {
    field:  ["Sun","Grass (Producer)","Rabbit (Primary)","Fox (Secondary)","Hawk (Tertiary)"],
    pond:   ["Sun","Algae (Producer)","Zooplankton (Primary)","Minnow (Secondary)","Bass (Tertiary)"],
    forest: ["Sun","Oak (Producer)","Caterpillar (Primary)","Bird (Secondary)","Hawk (Tertiary)"],
    ocean:  ["Sun","Phytoplankton (Producer)","Zooplankton (Primary)","Small Fish (Secondary)","Tuna (Tertiary)"]
  };
  const chainSel = document.getElementById('chainSel');
  const chainView = document.getElementById('chainView');
  document.getElementById('showChain').addEventListener('click', ()=>{
    const key = chainSel.value;
    const arr = CHAINS[key];
    chainView.innerHTML = '';
    arr.forEach((n,i)=>{
      const node = document.createElement('div');
      node.className='node';
      node.textContent = n;
      chainView.appendChild(node);
      if(i < arr.length-1){
        const arrow = document.createElement('div');
        arrow.className='arrow';
        arrow.textContent = '‚ûú';
        chainView.appendChild(arrow);
      }
    });
  });
  // render a default chain
  document.getElementById('showChain').click();

  // --- Quiz ---
  const key = { q1:"C", q2:"A", q3:"B" };
  document.getElementById('quizBtn').addEventListener('click', ()=>{
    let score=0, total=Object.keys(key).length;
    for (const q in key){
      const sel = document.querySelector(`input[name="${q}"]:checked`);
      if(sel && sel.value===key[q]) score++;
    }
    document.getElementById('quizScore').textContent = `Score: ${score}/${total}`;
  });
</script>
</body>
</html>
